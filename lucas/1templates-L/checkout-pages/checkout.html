<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/lucas/css/estilo.css">
    <link rel="stylesheet" href="checkout.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <title>Checkout - ComÃ©rcio Digital</title>
</head>
<body>
    <header>
        <div class="cabecario">
            <div class="texto-logo">
                <img src="/lucas/img-L/2.png" id="logo-2" alt="logo">
            </div>
        </div>
        <nav>
            <div>
                <form action="https://google.com/search" method="get">
                    <input class="pesquisa" type="text" name="q" placeholder=" Pesquise no ComÃ©rcioDigital.com.br">
                    <button class="button"><i class="fa-solid fa-magnifying-glass"></i></button>
                </form>
            </div>
            <div class="menu">
                <!-- Menu vazio -->
            </div>
        </nav>
    </header>

    <div class="checkout-container">
        <h2>Checkout</h2>
        <ul id="checkout-list"></ul>
        <p id="checkout-total"></p>
        <button class="botao-finalizar">Confirmar Pedido</button>
    </div>

    <footer>
        <div style="max-width: 1200px; margin: auto; display: flex; flex-wrap: wrap; justify-content: space-around;">
            <div class="contato">
                <h3 style="color: #fff; font-weight: 500;">Contato</h3>
                <p>ðŸ“ž (85) 99999-9999</p>
                <p>âœ‰ contato@lojavirtual.com</p>
            </div>
            <div>
                <h3 style="color: #fff; font-weight: 500;">Receba PromoÃ§Ãµes</h3>
                <form>
                    <input type="email" placeholder="Digite seu e-mail" required style="padding: 8px; width: 200px; border-radius: 5px; border: none;">
                    <button type="submit" style="padding: 8px; background-color: #dbff22; border: none; cursor: pointer; border-radius: 5px;">Inscrever-se</button>
                </form>
            </div>
        </div>
        <hr style="border: 1px solid rgba(255, 255, 255, 0.336); margin-top: 20px;">
        <p style="margin-top: 20px; font-size: 14px;">Â© 2025 Loja Virtual. Todos os direitos reservados.</p>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const carrinho = JSON.parse(localStorage.getItem("carrinho")) || {};
            console.log("PÃ¡gina de checkout carregada. Carrinho do localStorage:", carrinho);

            const checkoutList = document.getElementById("checkout-list");
            const totalElement = document.getElementById("checkout-total");

            if (!checkoutList || !totalElement) {
                console.error("Elementos #checkout-list ou #checkout-total nÃ£o encontrados.");
                return;
            }

            checkoutList.innerHTML = "";
            if (Object.keys(carrinho).length === 0) {
                checkoutList.innerHTML = "<li>Carrinho vazio</li>";
                totalElement.textContent = "Total: R$ 0,00";
                console.log("Carrinho estÃ¡ vazio.");
            } else {
                Object.entries(carrinho).forEach(([id, product]) => {
                    console.log("Adicionando item Ã  lista de checkout:", product);
                    const li = document.createElement("li");
                    li.textContent = `${product.name} - R$${product.price.toFixed(2)} x ${product.quantity}`;
                    checkoutList.appendChild(li);
                });
                const total = Object.values(carrinho).reduce((acc, item) => acc + item.price * item.quantity, 0);
                totalElement.textContent = `Total: R$${total.toFixed(2)}`;
                console.log("Total calculado:", total);
            }

            const botaoFinalizar = document.querySelector(".botao-finalizar");
            if (botaoFinalizar) {
                botaoFinalizar.addEventListener("click", function () {
                    console.log("Compra finalizada. Limpando carrinho.");
                    alert("Compra finalizada com sucesso!");
                    localStorage.removeItem("carrinho");
                    window.location.href = "index.html"; // Redireciona de volta para a pÃ¡gina inicial
                });
            } else {
                console.error("BotÃ£o .botao-finalizar nÃ£o encontrado.");
            }
        });
    </script>
</body>
</html>